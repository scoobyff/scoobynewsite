<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Scooby Streaming Hub - Streams</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Welcome Popup -->
<div class="popup-overlay" id="welcome-popup">
    <div class="popup-content">
        <h2 class="popup-title">WELCOME TO SCOOBY CRICKET HUB</h2>
        <p>Enter your name to access premium streams</p>
        <input autocomplete="off" class="popup-input" id="user-name" placeholder="Your Name" type="text"/>
        <button class="popup-button" onclick="submitUserName()">ENTER</button>
        <p class="popup-welcome-msg">Experience the best streaming quality!</p>
    </div>
</div>

<div class="container" id="main-content">
    <!-- Top Ad Space -->
    <div class="ad-space" id="top-ad">
        <span class="ad-label">AD</span>
        <a href="https://t.me/+u8PDYVT92MA3MTg9" onclick="trackAdClick('top-ad')" target="_blank">
            <img alt="Advertisement" src="https://i.postimg.cc/D4FJcKPY/images.png"/>
        </a>
    </div>

    <header>
        <button class="back-btn" onclick="window.location.href='index.html'">â¬…</button>
        <h1 id="category-title"></h1>
        <div>
            <span id="current-time"></span>
            <span class="welcome-user" id="welcome-message"></span>
        </div>
    </header>

    <!-- Broadcast Message Section -->
    <div class="broadcast-container" id="broadcast-container">
        <h3 class="broadcast-title">Broadcast Message</h3>
        <p class="broadcast-message" id="broadcast-message"></p>
    </div>

    <div class="watch-time-container">
        <div class="watch-time-label">YOUR WATCH TIME</div>
        <div class="watch-time-value" id="watch-time">00:00:00</div>
    </div>

    <!-- Middle Ad Space -->
    <div class="ad-space" id="middle-ad">
        <span class="ad-label">SPONSOR</span>
        <a href="https://t.me/+u8PDYVT92MA3MTg9" onclick="trackAdClick('middle-ad')" target="_blank">
            <img alt="Sponsor Advertisement" src="https://i.postimg.cc/D4FJcKPY/images.png"/>
        </a>
    </div>

    <!-- Streams -->
    <div id="streams-container"></div>

    <!-- Help Section -->
    <div class="help-section">
        <h3>Need Help?</h3>
        <p>If you're experiencing any issues with the streams or have questions, send us a message below:</p>
        <textarea id="help-message" placeholder="Describe your issue or ask a question..."></textarea>
        <button onclick="sendHelpMessage()">SEND MESSAGE</button>
    </div>

    <!-- Bottom Ad Space -->
    <div class="ad-space" id="bottom-ad">
        <span class="ad-label">AD</span>
        <a href="https://t.me/+u8PDYVT92MA3MTg9" onclick="trackAdClick('bottom-ad')" target="_blank">
            <img alt="Advertisement" src="https://i.postimg.cc/D4FJcKPY/images.png"/>
        </a>
    </div>
</div>

<script src="telegram.js"></script>
<script>
// Get category from URL
const urlParams = new URLSearchParams(window.location.search);
const selectedCategory = urlParams.get('cat');
document.getElementById('category-title').textContent = selectedCategory || 'Streams';

// Load category's streams from JSON
fetch('streams.json')
    .then(res => res.json())
    .then(data => {
        const category = data.find(cat => cat.category === selectedCategory);
        const streamsContainer = document.getElementById('streams-container');

        if (!category) {
            streamsContainer.innerHTML = "<p>No streams found for this category.</p>";
            return;
        }

        category.streams.forEach(stream => {
            const streamDiv = document.createElement('a');
            streamDiv.href = stream.url;
            streamDiv.target = "_blank";
            streamDiv.className = 'stream-card';
            streamDiv.onclick = () => trackExternalPlayer(stream.name);
            streamDiv.innerHTML = `
                <img src="${stream.image}" alt="${stream.name}">
                <span>${stream.name}</span>
            `;
            streamsContainer.appendChild(streamDiv);
        });
    });

// Live clock
setInterval(() => {
    document.getElementById('current-time').textContent = getIndianTime();
}, 1000);

// Watch time tracking
let watchSeconds = 0;
setInterval(() => {
    watchSeconds++;
    const hrs = String(Math.floor(watchSeconds / 3600)).padStart(2, '0');
    const mins = String(Math.floor((watchSeconds % 3600) / 60)).padStart(2, '0');
    const secs = String(watchSeconds % 60).padStart(2, '0');
    document.getElementById('watch-time').textContent = `${hrs}:${mins}:${secs}`;
}, 1000);
</script>

</body>
</html>