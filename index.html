<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Stream.jz</title>
<link rel="stylesheet" href="style.css" />
<style>
  /* Quick basic styles for layout */

  body {
    font-family: Arial, sans-serif;
    margin: 20px;
    background: #f8f9fa;
  }

  h2 {
    margin-top: 40px;
    margin-bottom: 20px;
  }

  #live-matches-container {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
  }

  .live-match {
    background: white;
    border: 1px solid #ddd;
    border-radius: 6px;
    width: 320px; /* rectangular */
    padding: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .live-match img {
    width: 60px;
    height: 60px;
    object-fit: contain;
    border-radius: 6px;
  }

  .live-match-details {
    flex-grow: 1;
  }

  .live-match-name {
    font-weight: bold;
    font-size: 1.1em;
  }

  .live-match-status {
    font-size: 0.9em;
    color: #888;
  }

  #external-streams-container {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
  }

  .stream-square {
    width: 140px; /* square-ish */
    background: white;
    border: 1px solid #ddd;
    border-radius: 6px;
    padding: 10px;
    cursor: pointer;
    text-align: center;
  }

  .stream-square img {
    width: 80px;
    height: 80px;
    object-fit: contain;
    margin-bottom: 8px;
  }

  /* Popup overlay styles */
  #popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.75);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }

  #popup-content {
    background: white;
    border-radius: 8px;
    padding: 20px;
    max-width: 90vw;
    max-height: 90vh;
    overflow: auto;
  }

  #popup-content iframe {
    width: 640px;
    height: 360px;
    border: none;
  }

  #popup-close {
    position: absolute;
    top: 10px;
    right: 20px;
    font-size: 28px;
    color: white;
    cursor: pointer;
    font-weight: bold;
  }

  /* Category title style */
  .category-title {
    width: 100%;
    font-weight: bold;
    margin: 30px 0 10px 0;
    font-size: 1.2em;
    border-bottom: 1px solid #ccc;
    padding-bottom: 5px;
  }
</style>
</head>
<body>

<h2>Live Matches</h2>
<div id="live-matches-container"></div>

<h2>External Streams</h2>
<div id="external-streams-container"></div>

<!-- Popup Overlay -->
<div id="popup-overlay">
  <div id="popup-close">&times;</div>
  <div id="popup-content"></div>
</div>

<script src="stream.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const liveContainer = document.getElementById('live-matches-container');
    const externalContainer = document.getElementById('external-streams-container');
    const popupOverlay = document.getElementById('popup-overlay');
    const popupContent = document.getElementById('popup-content');
    const popupClose = document.getElementById('popup-close');

    // Render live matches (rectangular)
    liveMatches.forEach(match => {
      const div = document.createElement('div');
      div.className = 'live-match';

      div.innerHTML = `
        <img src="${match.logo || 'https://via.placeholder.com/60?text=Logo'}" alt="Logo" />
        <div class="live-match-details">
          <div class="live-match-name">${match.name}</div>
          <div class="live-match-status">${match.description || match.status || ''}</div>
        </div>
      `;

      div.addEventListener('click', () => {
        openPopup(match.url);
      });

      liveContainer.appendChild(div);
    });

    // Render external streams (square grouped by category)
    externalStreams.forEach(category => {
      // Category title
      const catTitle = document.createElement('div');
      catTitle.className = 'category-title';
      catTitle.textContent = category.category;
      externalContainer.appendChild(catTitle);

      // Streams under category
      category.streams.forEach(stream => {
        const streamDiv = document.createElement('div');
        streamDiv.className = 'stream-square';

        streamDiv.innerHTML = `
          <img src="${stream.logo || 'https://via.placeholder.com/80?text=Logo'}" alt="Logo" />
          <div>${stream.name}</div>
          ${stream.note ? `<small>${stream.note}</small>` : ''}
        `;

        streamDiv.addEventListener('click', () => {
          openPopup(stream.externalUrl);
        });

        externalContainer.appendChild(streamDiv);
      });
    });

    // Popup open function
    function openPopup(url) {
      popupContent.innerHTML = `
        <iframe src="${url}" allowfullscreen allow="autoplay"></iframe>
      `;
      popupOverlay.style.display = 'flex';
    }

    // Popup close
    popupClose.addEventListener('click', () => {
      popupOverlay.style.display = 'none';
      popupContent.innerHTML = '';
    });

    // Close popup on outside click
    popupOverlay.addEventListener('click', e => {
      if (e.target === popupOverlay) {
        popupOverlay.style.display = 'none';
        popupContent.innerHTML = '';
      }
    });
  });
</script>

</body>
</html>