<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Scooby Streaming Hub - Streams</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Welcome Popup -->
<div class="popup-overlay" id="welcome-popup">
    <div class="popup-content">
        <h2 class="popup-title">WELCOME TO SCOOBY CRICKET HUB</h2>
        <p>Enter your name to access premium streams</p>
        <input type="text" id="user-name" class="popup-input" placeholder="Your Name" autocomplete="off"/>
        <button class="popup-button" onclick="submitUserName()">ENTER</button>
        <p class="popup-welcome-msg">Experience the best streaming quality!</p>
    </div>
</div>

<header>
    <h1>Scooby Streaming Hub</h1>
    <div>
        <span id="current-time"></span>
        <span class="welcome-user" id="welcome-message"></span>
    </div>
</header>

<h2 class="section-title" id="category-title"></h2>
<div id="streams-container"></div>

<script src="telegram.js"></script>
<script>
// Get category from URL
const urlParams = new URLSearchParams(window.location.search);
const selectedCategory = urlParams.get('cat');
document.getElementById('category-title').textContent = selectedCategory || 'Streams';

// Load category's streams from JSON
fetch('streams.json')
    .then(res => res.json())
    .then(data => {
        const category = data.find(cat => cat.category === selectedCategory);
        if (!category) {
            document.getElementById('streams-container').innerHTML = "<p>No streams found for this category.</p>";
            return;
        }

        const streamsContainer = document.getElementById('streams-container');
        category.streams.forEach(stream => {
            const streamDiv = document.createElement('a');
            streamDiv.href = stream.url;
            streamDiv.target = "_blank";
            streamDiv.className = 'stream-card';
            streamDiv.onclick = () => trackExternalPlayer(stream.name);
            streamDiv.innerHTML = `
                <img src="${stream.image}" alt="${stream.name}">
                <span>${stream.name}</span>
            `;
            streamsContainer.appendChild(streamDiv);
        });
    });

// Show current time live
setInterval(() => {
    document.getElementById('current-time').textContent = getIndianTime();
}, 1000);
</script>

</body>
</html>